(function(t){function e(e){for(var o,s,i=e[0],c=e[1],u=e[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},a={app:0},r=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0187":function(t,e,n){"use strict";var o=n("f69b"),a=n.n(o);a.a},"1f09":function(t,e,n){"use strict";var o=n("4f55"),a=n.n(o);a.a},"2b80":function(t,e,n){"use strict";n.r(e);var o=n("e017"),a=n.n(o),r=n("21a1"),s=n.n(r),i=new a.a({id:"left",use:"left-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="left"><defs><style>@font-face{font-family:element-icons;src:url(chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff) format("woff"),url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf ") format("truetype")}</style></defs><path d="M750.4 928c14.1-14.1 14.1-36.9 0-50.9L349.8 513.5 750.4 147c14.1-14.1 14.1-36.9 0-50.9-14.1-14.1-36.9-14.1-50.9 0l-426 392c-7 7-10.5 16.2-10.5 25.5 0 9.2 3.5 18.4 10.5 25.5l426 389c14 13.9 36.8 13.9 50.9-.1z" /></symbol>'});s.a.add(i);e["default"]=i},"37af":function(t,e,n){"use strict";n.r(e);var o=n("e017"),a=n.n(o),r=n("21a1"),s=n.n(r),i=new a.a({id:"right",use:"right-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="right"><defs><style>@font-face{font-family:element-icons;src:url(chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff) format("woff"),url("chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf ") format("truetype")}</style></defs><path d="M273.6 96c-14.1 14.1-14.1 36.9 0 50.9l400.6 363.6L273.6 877c-14.1 14.1-14.1 36.9 0 50.9 14.1 14.1 36.9 14.1 50.9 0l426-392c7-7 10.5-16.2 10.5-25.5 0-9.2-3.5-18.4-10.5-25.5l-426-389c-14-13.9-36.8-13.9-50.9.1z" /></symbol>'});s.a.add(i);e["default"]=i},"4d50":function(t,e,n){},"4f55":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),a=n.n(o);a.a},"5fc1":function(t,e,n){"use strict";var o=n("a400"),a=n.n(o);a.a},"6c66":function(t,e,n){"use strict";var o=n("80ea"),a=n.n(o);a.a},7378:function(t,e,n){"use strict";var o=n("8e0c"),a=n.n(o);a.a},"7cb7":function(t,e,n){},"80ea":function(t,e,n){},"8e0c":function(t,e,n){},"8f84":function(t,e,n){"use strict";var o=n("7cb7"),a=n.n(o);a.a},"9c0c":function(t,e,n){},a400:function(t,e,n){},b422:function(t,e,n){var o={"./left.svg":"2b80","./right.svg":"37af"};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id="b422"},be98:function(t,e,n){"use strict";var o=n("4d50"),a=n.n(o);a.a},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.isAlive?n("router-view"):t._e()],1)},r=[],s=n("d4ec"),i=n("bee2"),c=n("262e"),u=n("2caf"),l=n("9ab4"),d=n("60a3"),f=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.refresh=t.reload,t.isAlive=!0,t}return Object(i["a"])(n,[{key:"reload",value:function(){var t=this;this.isAlive=!1,this.$nextTick((function(){t.isAlive=!0}))}}]),n}(o["a"]);Object(l["a"])([Object(d["d"])()],f.prototype,"refresh",void 0),f=Object(l["a"])([d["a"]],f);var m=f,p=m,v=(n("5c0b"),n("2877")),h=Object(v["a"])(p,a,r,!1,null,null,null),b=h.exports,g=n("9483");Object(g["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var O=n("8c4f"),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("div",{staticClass:"stickyArea"},[n("Head",{attrs:{back:"",text:"盘点扫描中",left:t.left,right:t.right}}),n("div",{staticClass:"barcodeItem"},[n("span",[t._v("条码")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.barcode,expression:"barcode"}],ref:"barcodeInput",attrs:{placeholder:"请输入条码",type:"text"},domProps:{value:t.barcode},on:{input:function(e){e.target.composing||(t.barcode=e.target.value)}}})]),n("div",{staticClass:"amountItem"},[n("span",[t._v("数量")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],ref:"amountInput",attrs:{placeholder:"请输入数量",type:"text"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),n("Button",{attrs:{name:"确定"},nativeOn:{click:function(e){return t.inventory(e)}}})],1),n("div",{staticClass:"detail"},[n("div",{staticClass:"left"},[n("div",[t._v(" 条码 "+t._s(t.currentGood.barcode)+" ")]),n("div",{staticClass:"goodsname"},[n("span",[t._v("品名")]),n("span",{staticClass:"rightSpan"},[t._v(" "+t._s(t.currentGood.goodsname)+" ")])]),n("div",[t._v(" 规格 "+t._s(t.currentGood.spec)+" ")])]),n("ul",[n("li",[t._v("价格 "+t._s(t.currentGood.retailprice))]),n("li",[t._v("单位 "+t._s(t.currentGood.unitname))]),n("li",[t._v("库存 "+t._s(t.currentGood.stocknum))])])]),n("div",{staticClass:"total"},[n("span",[t._v("扫描数 "+t._s(t.scanAmount))]),n("span",[t._v("品项数 "+t._s(t.kindAmount))]),n("span",[t._v("总数量 "+t._s(t.totalAmount))])]),t._m(0)],1),n("div",{staticClass:"goodslist"},[n("GoodsList",{attrs:{"goods-list":t.goodsList}})],1)])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thead"},[n("span",[n("strong",[t._v("条码")])]),n("span",[n("strong",[t._v("品名")])]),n("span",[n("strong",[t._v("规格")])]),n("span",[n("strong",[t._v("数量")])])])}],_=(n("4de4"),n("caad"),n("d81d"),n("13d5"),n("2532"),n("96cf"),n("1da1")),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[n("span",[t._v(t._s(t.text))]),n("input",{attrs:{placeholder:t.placeholder,type:"text"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},w=[],x=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(o["a"]);Object(l["a"])([Object(d["c"])(String)],x.prototype,"text",void 0),Object(l["a"])([Object(d["c"])(String)],x.prototype,"value",void 0),Object(l["a"])([Object(d["c"])(String)],x.prototype,"placeholder",void 0),x=Object(l["a"])([d["a"]],x);var A=x,$=A,L=(n("7378"),Object(v["a"])($,k,w,!1,null,"476cb9d4",null)),S=L.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"head"},[n("Icon",{class:!t.left&&"leftHidden",attrs:{name:"left"},nativeOn:{click:function(e){return t.goBack(e)}}}),n("span",[n("strong",[t._v(t._s(t.text))])]),n("Icon",{class:!t.right&&"rightHidden",attrs:{name:"right"}}),n("div",{staticClass:"deleteAll",on:{click:t.deleteAll}},[t._v("清空记录")])],1)},I=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":"#"+t.name}})])},B=[],N=(n("4160"),n("d3b7"),n("159b"),n("ddb0"),function(t){return t.keys().forEach(t)});try{N(n("b422"))}catch(Et){console.log(Et)}var E=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(o["a"]);Object(l["a"])([Object(d["c"])(String)],E.prototype,"name",void 0),E=Object(l["a"])([d["a"]],E);var P=E,M=P,H=(n("be98"),Object(v["a"])(M,C,B,!1,null,"9da9feb4",null)),J=H.exports,T=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(i["a"])(n,[{key:"goBack",value:function(){this.$router.push(this.back)}},{key:"deleteAll",value:function(){this.$store.commit("deleteGoods"),this.refresh()}}]),n}(o["a"]);Object(l["a"])([Object(d["b"])()],T.prototype,"refresh",void 0),Object(l["a"])([Object(d["c"])(String)],T.prototype,"text",void 0),Object(l["a"])([Object(d["c"])(Boolean)],T.prototype,"left",void 0),Object(l["a"])([Object(d["c"])(Boolean)],T.prototype,"right",void 0),Object(l["a"])([Object(d["c"])(String)],T.prototype,"back",void 0),T=Object(l["a"])([Object(d["a"])({components:{Icon:J}})],T);var Y=T,q=Y,R=(n("0187"),Object(v["a"])(q,G,I,!1,null,"0dfd6520",null)),D=R.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",[n("tbody",t._l(t.goodsList,(function(e,o){return n("tr",{key:o,on:{click:function(n){return t.edit(e)}}},[n("td",[t._v(t._s(e.barcode))]),n("td",[t._v(t._s(e.goodsname))]),n("td",[t._v(t._s(e.spec))]),n("td",[t._v(t._s(e.amount))])])})),0)])},U=[],z=(n("25f0"),function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(i["a"])(n,[{key:"edit",value:function(t){var e=t.barcode,n=t.goodsname,o=t.spec,a=t.amount;this.$router.push({path:"edit",query:{barcode:e,goodsname:n,spec:o,amount:a.toString()}})}}]),n}(o["a"]));Object(l["a"])([Object(d["c"])(Array)],z.prototype,"goodsList",void 0),z=Object(l["a"])([d["a"]],z);var K=z,Q=K,V=(n("5fc1"),Object(v["a"])(Q,F,U,!1,null,"11717bb8",null)),W=V.exports;function X(t){return JSON.parse(JSON.stringify(t))}var Z={barcode:"",createdate:"",goodsname:"",py:"",retailprice:"",spec:"",stocknum:"",unitname:"",amount:0,createdAt:""},tt=n("f64c"),et=n("5a0c"),nt=n.n(et),ot=n("5530"),at=function(t,e,n){t.unshift(Object(ot["a"])(Object(ot["a"])({},e),{},{amount:parseInt(n),createdAt:nt()().format("YYYY-MM-DD HH:mm:ss.000")}))},rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"btn"},[t._v(t._s(t.name))])])},st=[],it=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(o["a"]);Object(l["a"])([Object(d["c"])(String)],it.prototype,"name",void 0),it=Object(l["a"])([d["a"]],it);var ct=it,ut=ct,lt=(n("1f09"),Object(v["a"])(ut,rt,st,!1,null,"1dd47fae",null)),dt=lt.exports,ft=function(t){o["a"].nextTick((function(){t.focus()}))},mt=function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.left=!1,t.right=!1,t.barcode="",t.amount="",t.scanAmount=0,t.kindAmount=0,t.totalAmount=0,t.currentGood={},t.goodsList=[],t}return Object(i["a"])(n,[{key:"mounted",value:function(){ft(this.$refs.barcodeInput)}},{key:"created",value:function(){this.$store.commit("getGoods"),this.$store.commit("getAmount");var t=X(this.$store.state.goodsList),e=t.map((function(t){return t.amount})),n=X(this.$store.state.amount);this.scanAmount=0===t.length?0:n.scanAmount,this.kindAmount=t.length,this.totalAmount=0===e.length?0:e.reduce((function(t,e){return t+e})),this.currentGood=t.length>0?X(t.shift()):X(Z),this.goodsList=X(this.$store.state.goodsList)}},{key:"inventory",value:function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(){var e,n,o,a,r,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.barcode){t.next=4;break}return tt["a"].info("请输入条码",.5),ft(this.$refs.barcodeInput),t.abrupt("return");case 4:if(this.amount){t.next=8;break}return tt["a"].info("请输入数量",.5),ft(this.$refs.amountInput),t.abrupt("return");case 8:if(/^(\d?)+(\.\d{0,2})?$/.test(this.amount)){t.next=12;break}return tt["a"].info("数量错误",.5),ft(this.$refs.amountInput),t.abrupt("return");case 12:return e={creater:this.amount,barcode:this.barcode},t.next=15,this.$store.dispatch("getResponse",{url:"/sssoa/infogoods/query",method:"POST",value:JSON.stringify(e)});case 15:if(n=t.sent,"无商品信息！"!==n.data.err_msg){t.next=22;break}return tt["a"].info("无商品信息",.5),ft(this.$refs.barcodeInput),this.barcode="",this.amount="",t.abrupt("return");case 22:this.scanAmount+=1,this.totalAmount=this.totalAmount+parseInt(this.amount),o=n.data.resultObj.map((function(t){return t.infodata}))[0],this.currentGood=X(o),a=X(this.goodsList).map((function(t){return t.barcode})),0===this.goodsList.length?(this.kindAmount=1,at(this.goodsList,this.currentGood,this.amount)):a.includes(this.barcode)?(r=this.goodsList.filter((function(t){return t.barcode===s.currentGood.barcode}))[0],r.amount+=parseInt(this.amount),r.createdAt=nt()().format("YYYY-MM-DD HH:mm:ss.000"),this.goodsList.sort((function(t,e){return nt()(e.createdAt).valueOf()-nt()(t.createdAt).valueOf()}))):(this.kindAmount+=1,at(this.goodsList,this.currentGood,this.amount)),this.$store.commit("saveGood",{goodsList:this.goodsList}),this.$store.commit("saveAmount",{amount:{scanAmount:this.scanAmount,kindAmount:this.kindAmount,totalAmount:this.totalAmount}}),this.barcode="",this.amount="",ft(this.$refs.barcodeInput);case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),n}(o["a"]);mt=Object(l["a"])([Object(d["a"])({components:{Button:dt,GoodsList:W,Head:D,Item:S}})],mt);var pt=mt,vt=pt,ht=(n("6c66"),Object(v["a"])(vt,j,y,!1,null,"fc916f40",null)),bt=ht.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit"},[n("Head",{attrs:{left:t.left,right:t.right,text:"商品编辑",back:"/home"}}),n("Item",{attrs:{text:"条码",value:t.barcode},nativeOn:{input:function(e){return t.onChange(e)}},model:{value:t.barcode,callback:function(e){t.barcode=e},expression:"barcode"}}),n("Item",{attrs:{text:"品名",value:t.goodsname},nativeOn:{input:function(e){return t.onChange(e)}},model:{value:t.goodsname,callback:function(e){t.goodsname=e},expression:"goodsname"}}),n("Item",{attrs:{text:"规格",value:t.spec},nativeOn:{input:function(e){return t.onChange(e)}},model:{value:t.spec,callback:function(e){t.spec=e},expression:"spec"}}),n("Item",{attrs:{text:"数量",value:t.amount},nativeOn:{input:function(e){return t.onChange(e)}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),n("div",{staticClass:"twoButton"},[n("Button",{attrs:{name:"保存商品"},nativeOn:{click:function(e){return t.saveGood(e)}}}),n("Button",{attrs:{name:"删除商品"},nativeOn:{click:function(e){return t.removeGood(e)}}})],1)],1)},Ot=[],jt=(n("c975"),n("a434"),function(t){Object(c["a"])(n,t);var e=Object(u["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.left=!0,t.right=!1,t.barcode="",t.goodsname="",t.spec="",t.amount="",t}return Object(i["a"])(n,[{key:"created",value:function(){this.$store.commit("getGoods"),this.barcode=this.$route.query.barcode,this.goodsname=this.$route.query.goodsname,this.spec=this.$route.query.spec,this.amount=this.$route.query.amount}},{key:"saveGood",value:function(){tt["a"].info("保存成功",.5),this.$router.push("/home")}},{key:"removeGood",value:function(){var t=this,e=X(this.$store.state.goodsList),n=e.filter((function(e){return e.barcode===t.barcode}))[0],o=e.indexOf(n);e.splice(o,1),this.$store.commit("saveGood",{goodsList:e}),tt["a"].info("删除成功",.5),this.$router.push("/home")}},{key:"onChange",value:function(){var t=this,e=this.$store.state.goodsList,n=e.filter((function(e){return e.barcode===t.barcode}))[0];n.goodsname=this.goodsname,n.spec=this.spec,n.amount=parseInt(this.amount),this.$store.commit("saveGood",{goodsList:e})}}]),n}(o["a"]));jt=Object(l["a"])([Object(d["a"])({components:{Button:dt,Item:S,Head:D}})],jt);var yt=jt,_t=yt,kt=(n("8f84"),Object(v["a"])(_t,gt,Ot,!1,null,"75a09202",null)),wt=kt.exports;o["a"].use(O["a"]);var xt=[{path:"/",redirect:"/home"},{path:"/home",component:bt},{path:"/edit",component:wt}],At=new O["a"]({routes:xt}),$t=At,Lt=n("2f62"),St=n("bc3a"),Gt=n.n(St);function It(t,e,n){return new Promise((function(o,a){Gt()({url:t,data:n,method:e}).then((function(t){o(t)})).catch((function(t){a(t)}))}))}Gt.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",Gt.a.defaults.baseURL="http://192.168.0.234:9033";var Ct=function(t,e){window.localStorage.setItem(t,e)},Bt=function(t){return window.localStorage.getItem(t)};o["a"].use(Lt["a"]);var Nt=new Lt["a"].Store({state:{goodsList:[],amount:{scanAmount:0,kindAmount:0,totalAmount:0}},mutations:{saveGood:function(t,e){Ct("goodsList",JSON.stringify(e.goodsList))},getGoods:function(t){var e=Bt("goodsList");t.goodsList=X(e?JSON.parse(e):[])},deleteGoods:function(t){window.localStorage.removeItem("goodsList"),window.localStorage.removeItem("amount")},saveAmount:function(t,e){Ct("amount",JSON.stringify(e.amount))},getAmount:function(t){var e=Bt("amount");t.amount=X(e?JSON.parse(e):{scanAmount:0,kindAmount:0,totalAmount:0})}},actions:{getResponse:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,n.next=3,It(e.url,e.method,e.value);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}},modules:{}});n("c346");o["a"].config.productionTip=!1,new o["a"]({router:$t,store:Nt,render:function(t){return t(b)}}).$mount("#app")},f69b:function(t,e,n){}});
//# sourceMappingURL=app.24857160.js.map